<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>API test page</title>
</head>
<body>
    <script>
        async function initIframe() {
            const iframe = document.createElement("iframe");
            iframe.setAttribute("sandbox", "allow-scripts");
            iframe.setAttribute("style", "display: none;");
            iframe.setAttribute("src", "https://alttiri.github.io/gfycat-id-camel-caser/api.html");

            document.body.append(iframe);
            await new Promise(resolve => {
                iframe.addEventListener("load", resolve);
            });
            return iframe;
        }

        !async function main() {
            const iframe = await initIframe();
            iframe.contentWindow.postMessage("redbluecat", "*");
            window.addEventListener("message", event => {
                console.log(event.data, event);
            });
        }();
    </script>
</body>
</html>
